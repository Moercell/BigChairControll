<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Big Chair</title>
</head>
<body>
<h1>Die Stuhlsteuerung</h1>

<button type="button" data-action="moveFront">move to front</button>
<button type="button" data-action="moveLeft">turn around left</button>
<button type="button" data-action="moveRight">turn around right</button>
<button type="button" data-action="moveBack">move to back</button>
<button type="button" data-action="moveStop">stop!</button>

<style>

    body {
        background-color: #323f48;
        padding: 1em;
    }

    h1 {
        color: white;
        font-family: sans-serif;
    }

    button {
        padding: 2.2em 4.2em;
        background-color: #e86473;
        color: white;
        border: none;
        box-shadow: none;
        border-radius: 12px;
        font-family: sans-serif;
        font-weight: bold;
        font-size: 1em;
        margin-top: 0.2em;
    }

    button:hover {
        padding: 2.2em 4.2em;
        background-color: #ED5973;
        border: none;
        border-radius: 12px;
        transform: scaleY(1.1);
        box-shadow: 4px 6px 18px -9px rgba(0, 0, 0, 0.75);
    }
</style>

<script>

    const chairSocketConnection = new WebSocket("ws://10.51.3.66:6969");

    chairSocketConnection.onopen = function () {
        console.log("Connected to chair!");
    };

    function actionLeft() {
        sendMessage({action: 'move', direction: 'left'});
    }

    function actionRight() {
        sendMessage({action: 'move', direction: 'right'});
    }

    function actionFront() {
        sendMessage({action: 'move', direction: 'front'});
    }

    function actionBack() {
        sendMessage({action: 'move', direction: 'back'});
    }

    function actionStop() {
        sendMessage({action: 'move', direction: 'stop'});
    }

    function setupButtons() {
        // find buttons that want to send an action
        var buttons = document.querySelectorAll('button[data-action]');

        buttons.forEach(function (button) {
            var action = button.getAttribute('data-action');

            if (action == 'moveLeft') {
                button.addEventListener('click', function () {
                    actionLeft();
                });
            }

            if (action == 'moveRight') {
                button.addEventListener('click', function () {
                    actionRight();
                });
            }

            if (action == 'moveFront') {
                button.addEventListener('click', function () {
                    actionFront();
                });
            }

            if (action == 'moveBack') {
                button.addEventListener('click', function () {
                    actionBack();
                });
            }

            if (action == 'moveStop') {
                button.addEventListener('click', function () {
                    actionStop();
                });
            }
        })
    }

    setupButtons();

    function sendMessage(message) {
        console.log('socket send bytes:', message);
        chairSocketConnection.send(JSON.stringify(message));
    }
</script>
</body>
</html>